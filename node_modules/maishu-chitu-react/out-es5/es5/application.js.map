{"version":3,"sources":["../es6/application.js"],"names":["__awaiter","P","step","generator","reject","result","resolve","_arguments","define","Object","value","Page","chitu","exports","Application","page","actionExports","loadjs","errors_1","_action","action","app","props","data","source","createService","element","React","component","ReactDOM"],"mappings":"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","sourcesContent":["var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\ndefine([\"require\", \"exports\", \"react\", \"react-dom\", \"maishu-chitu\", \"./errors\"], function (require, exports, React, ReactDOM, chitu, errors_1) {\r\n    \"use strict\";\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    class Page extends chitu.Page {\r\n        constructor() {\r\n            super(...arguments);\r\n            this.component = null;\r\n        }\r\n    }\r\n    exports.Page = Page;\r\n    class Application extends chitu.Application {\r\n        constructor(args) {\r\n            super(args);\r\n            this.pageCreated.add((sender, page) => {\r\n                page.element.className = \"page\";\r\n            });\r\n        }\r\n        createDefaultAction(url, loadjs) {\r\n            return (page) => __awaiter(this, void 0, void 0, function* () {\r\n                let actionExports = yield loadjs(url);\r\n                if (!actionExports)\r\n                    throw errors_1.Errors.exportsCanntNull(url);\r\n                let _action = actionExports['default'];\r\n                if (_action == null) {\r\n                    throw errors_1.Errors.canntFindAction(page.name);\r\n                }\r\n                let action;\r\n                if (!chitu.PageMaster.isClass(_action)) {\r\n                    return _action(page, this);\r\n                }\r\n                action = _action;\r\n                let app = this;\r\n                let props = {\r\n                    app,\r\n                    data: page.data,\r\n                    source: page,\r\n                    createService(type) {\r\n                        return page.createService(type);\r\n                    }\r\n                };\r\n                let element = React.createElement(action, props);\r\n                let component = ReactDOM.render(element, page.element);\r\n                page.component = component;\r\n            });\r\n        }\r\n    }\r\n    exports.Application = Application;\r\n});\r\n"],"file":"application.js"}