import { Callback } from "./callback";
export interface DataSourceSelectResult<T> {
    totalRowCount: number;
    dataItems: Array<T>;
}
export interface DataSourceError extends Error {
    handled: boolean;
    method: DataMethod;
}
export declare type DataMethod = 'select' | 'update' | 'delete' | 'insert';
export declare class DataSource<T> {
    private args;
    primaryKeys: (keyof T)[];
    inserting: Callback<{
        sender: DataSource<T>;
        dataItem: T;
        index: number;
    }>;
    inserted: Callback<{
        sender: DataSource<T>;
        dataItem: T;
        index: number;
    }>;
    deleting: Callback<{
        sender: DataSource<T>;
        dataItem: T;
    }>;
    deleted: Callback<{
        sender: DataSource<T>;
        dataItem: T;
    }>;
    updating: Callback<{
        sender: DataSource<T>;
        dataItem: T;
    }>;
    updated: Callback<{
        sender: DataSource<T>;
        dataItem: T;
    }>;
    selecting: Callback<{
        sender: DataSource<T>;
        selectArguments: DataSourceSelectArguments;
    }>;
    selected: Callback<{
        sender: DataSource<T>;
        selectResult: DataSourceSelectResult<T>;
        selectArguments: DataSourceSelectArguments;
    }>;
    error: Callback<{
        sender: DataSource<T>;
        error: DataSourceError;
    }>;
    constructor(args: DataSourceArguments<T>);
    get canDelete(): boolean;
    get canInsert(): boolean;
    get canUpdate(): boolean;
    executeInsert(item: T, args?: any): Promise<any>;
    executeDelete(item: T, args?: any): Promise<any>;
    executeUpdate(item: T, args?: any): Promise<any>;
    executeSelect(args?: DataSourceSelectArguments): Promise<DataSourceSelectResult<T>>;
    insert(item: T): any;
    insert(item: T, index?: number): any;
    delete(item: T, args?: any): Promise<any>;
    update(item: T, args?: any): Promise<any>;
    isSameItem(theItem: T, otherItem: T): boolean;
    private checkPrimaryKeys;
    select(args?: DataSourceSelectArguments): Promise<DataSourceSelectResult<T>>;
    private processError;
}
export declare class DataSourceSelectArguments {
    startRowIndex?: number;
    maximumRows?: number;
    sortExpression?: string;
    filter?: string;
    constructor();
}
export declare type DataSourceArguments<T> = {
    primaryKeys?: (keyof T)[];
    select: ((args: DataSourceSelectArguments) => Promise<DataSourceSelectResult<T>>);
    insert?: ((item: T, args?: any) => Promise<any>);
    update?: ((item: T, args?: any) => Promise<any>);
    delete?: ((item: T, args?: any) => Promise<any>);
    sort?: (items: T[]) => T[];
};
